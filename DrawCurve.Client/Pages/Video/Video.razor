@page "/video/{Key}"
@inject VideoService videoService

<h3>Video</h3>

@if (video == null)
{
    <PageTitle>Video</PageTitle>
    <p><em>Loading...</em></p>
}
else
{
    <PageTitle>@video.Name</PageTitle>
    <div class="row">
        <div class="col-md-8">
            <div class="video-container" style="position: relative; padding-top: 56.25%;">
                <video id="videoPlayer" controls style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
                    <source src="/api/video/@video.RenderCnfId" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card mt-3">
                <div class="card-body">
                    <h5 class="card-title">@video.Name</h5>
                    <p class="card-text">@video.Description</p>
                    <p class="card-text"><small class="text-muted">Published on @video.DatePublish.ToString("MMMM dd, yyyy")</small></p>
                </div>
            </div>
        </div>
    </div>
}

@code {
    [Parameter]
    public string Key { get; set; }

    private VideoInfo video;

    protected override async Task OnInitializedAsync()
    {
        video = await videoService.GetVideoInfo(Key);
    }
}

<style>
    .video-container {
        overflow: hidden;
    }
</style>